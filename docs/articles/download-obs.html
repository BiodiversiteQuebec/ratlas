<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>download-obs â€¢ ratlas</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="download-obs">
<meta property="og:description" content="ratlas">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">ratlas</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/download-bird-presence-absence.html">download_montreal_presence_absence</a>
    </li>
    <li>
      <a href="../articles/download-obs.html">download-obs</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="download-obs_files/header-attrs-2.11.2/header-attrs.js"></script><script src="download-obs_files/htmlwidgets-1.5.4/htmlwidgets.js"></script><script src="download-obs_files/jquery-1.12.4/jquery.min.js"></script><link href="download-obs_files/leaflet-1.3.1/leaflet.css" rel="stylesheet">
<script src="download-obs_files/leaflet-1.3.1/leaflet.js"></script><link href="download-obs_files/leafletfix-1.0.0/leafletfix.css" rel="stylesheet">
<script src="download-obs_files/proj4-2.6.2/proj4.min.js"></script><script src="download-obs_files/Proj4Leaflet-1.0.1/proj4leaflet.js"></script><link href="download-obs_files/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet">
<script src="download-obs_files/leaflet-binding-2.0.4.1/leaflet.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>download-obs</h1>
            
      
      
      <div class="hidden name"><code>download-obs.Rmd</code></div>

    </div>

    
    
<div id="dowloading-observations" class="section level1">
<h1 class="hasAnchor">
<a href="#dowloading-observations" class="anchor"></a>Dowloading observations</h1>
<div id="get-started-quickly-get-canis-lupus-observations-from-atlas" class="section level2">
<h2 class="hasAnchor">
<a href="#get-started-quickly-get-canis-lupus-observations-from-atlas" class="anchor"></a>Get started quickly : Get <em>Canis Lupus</em> observations from Atlas</h2>
<p>Observations within Atlas may be downloaded using the <code>get_observations</code> functions. To filter our request to the dataset, we will use the function <code><a href="../reference/get_taxa.html">get_taxa()</a></code> to obtain first the <code>Canis Lupus</code> taxa data. We then use it to as a filter to get observations and then display the first 10 records.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va">ratlas</span><span class="op">)</span>
<span class="va">taxa</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_taxa.html">get_taxa</a></span><span class="op">(</span>scientific_name <span class="op">=</span> <span class="st">"Canis lupus"</span><span class="op">)</span>
<span class="va">obs</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_observations.html">get_observations</a></span><span class="op">(</span>id_taxa <span class="op">=</span> <span class="va">taxa</span><span class="op">$</span><span class="va">id</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">obs</span>, <span class="fl">10</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 10 x 19</span>
<span class="co">#&gt;          id org_parent_event org_event org_id_obs id_datasets year_obs month_obs</span>
<span class="co">#&gt;       &lt;int&gt; &lt;lgl&gt;            &lt;lgl&gt;     &lt;chr&gt;            &lt;int&gt;    &lt;int&gt;     &lt;int&gt;</span>
<span class="co">#&gt;  1   1.52e8 NA               NA        &lt;NA&gt;               728     2008         8</span>
<span class="co">#&gt;  2   1.52e8 NA               NA        &lt;NA&gt;               728     2008        11</span>
<span class="co">#&gt;  3   1.52e8 NA               NA        &lt;NA&gt;               728     2008        11</span>
<span class="co">#&gt;  4   1.52e8 NA               NA        &lt;NA&gt;               728     2008        10</span>
<span class="co">#&gt;  5   1.52e8 NA               NA        &lt;NA&gt;               728     2008         5</span>
<span class="co">#&gt;  6   1.52e8 NA               NA        &lt;NA&gt;               728     2012        10</span>
<span class="co">#&gt;  7   1.52e8 NA               NA        &lt;NA&gt;               728     2012         6</span>
<span class="co">#&gt;  8   1.52e8 NA               NA        &lt;NA&gt;               728     2012         1</span>
<span class="co">#&gt;  9   1.52e8 NA               NA        &lt;NA&gt;               728     2012        10</span>
<span class="co">#&gt; 10   1.52e8 NA               NA        &lt;NA&gt;               728     2012        11</span>
<span class="co">#&gt; # ... with 12 more variables: day_obs &lt;int&gt;, time_obs &lt;chr&gt;, id_taxa &lt;int&gt;,</span>
<span class="co">#&gt; #   id_variables &lt;int&gt;, obs_value &lt;int&gt;, issue &lt;chr&gt;, created_by &lt;chr&gt;,</span>
<span class="co">#&gt; #   modified_at &lt;chr&gt;, modified_by &lt;chr&gt;, id_taxa_obs &lt;int&gt;, geom.type &lt;chr&gt;,</span>
<span class="co">#&gt; #   geom.coordinates &lt;list&gt;</span></code></pre></div>
<p>RAtlas functions expose Atlas data tables and related attributes. We can access related records storing information about the <code>datasets</code> and measured <code>variables</code> and filter them using the <code>id_datasets</code> and <code>id_variables</code> values for our observations.</p>
<p>We can finally join the taxa, dataset and variables attributes to the table using the <code>dplyr</code> functions and <code><a href="https://rdrr.io/pkg/leaflet/man/leaflet-imports.html">%&gt;%</a></code> pipe operation.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://magrittr.tidyverse.org">magrittr</a></span><span class="op">)</span> <span class="co"># To use pipe operator %&gt;%</span>

<span class="co"># Get data from Atlas tables</span>
<span class="va">var</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_gen.html">get_gen</a></span><span class="op">(</span><span class="st">'variables'</span>, id<span class="op">=</span><span class="va">obs</span><span class="op">$</span><span class="va">id_variables</span><span class="op">)</span>
<span class="va">datasets</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_datasets.html">get_datasets</a></span><span class="op">(</span><span class="va">obs</span><span class="op">$</span><span class="va">id_datasets</span><span class="op">)</span>

<span class="co"># Rename columns with prefix before join</span>
<span class="va">taxa</span> <span class="op">&lt;-</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html">rename_with</a></span><span class="op">(</span><span class="va">taxa</span>, <span class="op">~</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="st">"taxa."</span>, <span class="va">.x</span><span class="op">)</span><span class="op">)</span>
<span class="va">var</span> <span class="op">&lt;-</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html">rename_with</a></span><span class="op">(</span><span class="va">var</span>, <span class="op">~</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="st">"var."</span>, <span class="va">.x</span><span class="op">)</span><span class="op">)</span>
<span class="va">datasets</span> <span class="op">&lt;-</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html">rename_with</a></span><span class="op">(</span><span class="va">datasets</span>, <span class="op">~</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="st">"ds."</span>, <span class="va">.x</span><span class="op">)</span><span class="op">)</span>

<span class="co"># Join using `left_join` function from `dplyr`</span>
<span class="va">obs</span> <span class="op">&lt;-</span> <span class="va">obs</span> <span class="op">%&gt;%</span>
  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html">left_join</a></span><span class="op">(</span><span class="va">taxa</span>, by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"id_taxa"</span> <span class="op">=</span> <span class="st">"taxa.id"</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html">left_join</a></span><span class="op">(</span><span class="va">var</span>, by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"id_variables"</span> <span class="op">=</span> <span class="st">"var.id"</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html">left_join</a></span><span class="op">(</span><span class="va">datasets</span>, by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"id_datasets"</span> <span class="op">=</span> <span class="st">"ds.id"</span><span class="op">)</span><span class="op">)</span>

<span class="co"># Display first record as a vertical list</span>
<span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/t.html">t</a></span><span class="op">(</span><span class="va">obs</span><span class="op">[</span><span class="fl">1</span>, <span class="op">]</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt;                        [,1]                                           </span>
<span class="co">#&gt; id                     151904473                                      </span>
<span class="co">#&gt; org_parent_event       NA                                             </span>
<span class="co">#&gt; org_event              NA                                             </span>
<span class="co">#&gt; org_id_obs             "NA"                                           </span>
<span class="co">#&gt; id_datasets            728                                            </span>
<span class="co">#&gt; year_obs               2008                                           </span>
<span class="co">#&gt; month_obs              8                                              </span>
<span class="co">#&gt; day_obs                31                                             </span>
<span class="co">#&gt; time_obs               "NA"                                           </span>
<span class="co">#&gt; id_taxa                2217                                           </span>
<span class="co">#&gt; id_variables           9                                              </span>
<span class="co">#&gt; obs_value              1                                              </span>
<span class="co">#&gt; issue                  "NA"                                           </span>
<span class="co">#&gt; created_by             "coleo"                                        </span>
<span class="co">#&gt; modified_at            "2021-11-23T13:33:44.376391-05:00"             </span>
<span class="co">#&gt; modified_by            "postgres"                                     </span>
<span class="co">#&gt; id_taxa_obs            8420                                           </span>
<span class="co">#&gt; geom.type              "Point"                                        </span>
<span class="co">#&gt; geom.coordinates       numeric,2                                      </span>
<span class="co">#&gt; taxa.scientific_name   "Canis lupus"                                  </span>
<span class="co">#&gt; taxa.rank              "species"                                      </span>
<span class="co">#&gt; taxa.valid             TRUE                                           </span>
<span class="co">#&gt; taxa.valid_taxa_id     NA                                             </span>
<span class="co">#&gt; taxa.gbif              NA                                             </span>
<span class="co">#&gt; taxa.col               3030111                                        </span>
<span class="co">#&gt; taxa.family            "Canidae"                                      </span>
<span class="co">#&gt; taxa.species_gr        "MammifÃ¨res"                                   </span>
<span class="co">#&gt; taxa.authorship        "Linnaeus, 1758"                               </span>
<span class="co">#&gt; taxa.updated_at        "2021-03-05"                                   </span>
<span class="co">#&gt; taxa.qc_status         NA                                             </span>
<span class="co">#&gt; taxa.exotic            FALSE                                          </span>
<span class="co">#&gt; var.name               "presence"                                     </span>
<span class="co">#&gt; var.unit               NA                                             </span>
<span class="co">#&gt; var.description        NA                                             </span>
<span class="co">#&gt; ds.original_source     "MFFP"                                         </span>
<span class="co">#&gt; ds.org_dataset_id      NA                                             </span>
<span class="co">#&gt; ds.creator             "MFFP"                                         </span>
<span class="co">#&gt; ds.title               "DonnÃ©es de localisation des grands mammifÃ¨res"</span>
<span class="co">#&gt; ds.publisher           "NA"                                           </span>
<span class="co">#&gt; ds.modified            "2021-01-26"                                   </span>
<span class="co">#&gt; ds.keywords            NA                                             </span>
<span class="co">#&gt; ds.abstract            NA                                             </span>
<span class="co">#&gt; ds.type_sampling       NA                                             </span>
<span class="co">#&gt; ds.type_obs            "human observation"                            </span>
<span class="co">#&gt; ds.intellectual_rights "MFFP"                                         </span>
<span class="co">#&gt; ds.license             "NA"                                           </span>
<span class="co">#&gt; ds.owner               "MFFP"                                         </span>
<span class="co">#&gt; ds.methods             "NA"                                           </span>
<span class="co">#&gt; ds.open_data           FALSE                                          </span>
<span class="co">#&gt; ds.exhaustive          FALSE                                          </span>
<span class="co">#&gt; ds.direct_obs          TRUE                                           </span>
<span class="co">#&gt; ds.centroid            FALSE</span></code></pre></div>
</div>
<div id="filter-observation-request-using-any-table-attributes" class="section level2">
<h2 class="hasAnchor">
<a href="#filter-observation-request-using-any-table-attributes" class="anchor"></a>Filter observation request using any table attributes</h2>
<p>Any request may be filtered using any data attributes used as a data column in Atlas. For example, we will filter the <code>original_source</code> column to get only datasets related to the <code>eBird</code> datasets. We will the use the id values of those datasets to return only <code>observations</code> with the specified <code>id_datasets</code> and for the taxa associated to the Snowy owl <em>Bubo scandiacus</em>.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Get dataset and taxa records for which we will filter observations</span>
<span class="va">ebird</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_datasets.html">get_datasets</a></span><span class="op">(</span>original_source <span class="op">=</span> <span class="st">"eBird"</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html">rename_with</a></span><span class="op">(</span><span class="op">~</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="st">"ds."</span>, <span class="va">.x</span><span class="op">)</span><span class="op">)</span>
<span class="va">taxa</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_taxa.html">get_taxa</a></span><span class="op">(</span>scientific_name <span class="op">=</span> <span class="st">"Bubo scandiacus"</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html">rename_with</a></span><span class="op">(</span><span class="op">~</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="st">"taxa."</span>, <span class="va">.x</span><span class="op">)</span><span class="op">)</span>

<span class="co"># Filter observation request through `id_taxa` and `id_datasets` and year values</span>
<span class="va">obs</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_observations.html">get_observations</a></span><span class="op">(</span>
  id_datasets <span class="op">=</span> <span class="va">ebird</span><span class="op">$</span><span class="va">ds.id</span>,
  id_taxa <span class="op">=</span> <span class="va">taxa</span><span class="op">$</span><span class="va">taxa.id</span>,
  year <span class="op">=</span> <span class="fl">2018</span><span class="op">:</span><span class="fl">2021</span><span class="op">)</span>

<span class="co"># Join using taxa, datasets, and variables values</span>
<span class="va">var</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_gen.html">get_gen</a></span><span class="op">(</span><span class="st">'variables'</span>, id<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/unique.html">unique</a></span><span class="op">(</span><span class="va">obs</span><span class="op">$</span><span class="va">id_variables</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html">rename_with</a></span><span class="op">(</span> <span class="op">~</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="st">"var."</span>, <span class="va">.x</span><span class="op">)</span><span class="op">)</span>

<span class="va">obs</span> <span class="op">&lt;-</span> <span class="va">obs</span> <span class="op">%&gt;%</span>
  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html">left_join</a></span><span class="op">(</span><span class="va">taxa</span>, by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"id_taxa"</span> <span class="op">=</span> <span class="st">"taxa.id"</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html">left_join</a></span><span class="op">(</span><span class="va">var</span>, by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"id_variables"</span> <span class="op">=</span> <span class="st">"var.id"</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html">left_join</a></span><span class="op">(</span><span class="va">ebird</span>, by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"id_datasets"</span> <span class="op">=</span> <span class="st">"ds.id"</span><span class="op">)</span><span class="op">)</span>

<span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="fu">glue</span><span class="fu">::</span><span class="fu"><a href="https://glue.tidyverse.org/reference/glue.html">glue</a></span><span class="op">(</span>
  <span class="st">"Found {nrow(obs)} observations between {min(obs$year_obs)} "</span>,
  <span class="st">"and {max(obs$year_obs)}"</span><span class="op">)</span>
  <span class="op">)</span>
<span class="co">#&gt; Found 23793 observations between 2018 and 2019</span>

<span class="co"># Print map of observations using the package `leaflet`</span>

<span class="co"># install.packages("leaflet")</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://rstudio.github.io/leaflet/">leaflet</a></span><span class="op">)</span>
<span class="co">#&gt; Warning: package 'leaflet' was built under R version 4.1.1</span>
<span class="va">coord</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/t.html">t</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/lapply.html">sapply</a></span><span class="op">(</span><span class="va">obs</span><span class="op">$</span><span class="va">geom.coordinates</span>, <span class="va">as.list</span><span class="op">)</span><span class="op">)</span>, <span class="fl">100</span><span class="op">)</span> <span class="co"># Only 100 records shown</span>
<span class="fu"><a href="https://rdrr.io/r/base/colnames.html">colnames</a></span><span class="op">(</span><span class="va">coord</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"lng"</span>, <span class="st">"lat"</span><span class="op">)</span>

<span class="va">map</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/leaflet/man/leaflet.html">leaflet</a></span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/pkg/leaflet/man/map-layers.html">addTiles</a></span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span>  <span class="co"># Add default OpenStreetMap map tiles</span>
  <span class="fu"><a href="https://rdrr.io/pkg/leaflet/man/map-layers.html">addMarkers</a></span><span class="op">(</span>lng <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html">as.numeric</a></span><span class="op">(</span><span class="va">coord</span><span class="op">[</span>, <span class="st">"lng"</span><span class="op">]</span><span class="op">)</span>, lat <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html">as.numeric</a></span><span class="op">(</span><span class="va">coord</span><span class="op">[</span>, <span class="st">"lat"</span><span class="op">]</span><span class="op">)</span><span class="op">)</span>
<span class="va">map</span></code></pre></div>
<div id="htmlwidget-7bd00c467d7494abef9d" style="width:700px;height:432.632880098888px;" class="leaflet html-widget"></div>
<script type="application/json" data-for="htmlwidget-7bd00c467d7494abef9d">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"calls":[{"method":"addTiles","args":["//{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",null,null,{"minZoom":0,"maxZoom":18,"tileSize":256,"subdomains":"abc","errorTileUrl":"","tms":false,"noWrap":false,"zoomOffset":0,"zoomReverse":false,"opacity":1,"zIndex":1,"detectRetina":false,"attribution":"&copy; <a href=\"http://openstreetmap.org\">OpenStreetMap<\/a> contributors, <a href=\"http://creativecommons.org/licenses/by-sa/2.0/\">CC-BY-SA<\/a>"}]},{"method":"addMarkers","args":[[43.5911,44.6083,43.3507,43.4441,43.4471,43.4012,44.3626,43.9032,44.3386,43.7379,43.4471,43.6479,44.3481,43.4471,43.4386,43.4471,43.345,43.6479,43.4367,43.4441,43.4471,43.5301,44.3388,44.3386,43.8939,43.1653,44.3386,43.6479,43.6479,43.637,44.3325,44.3481,43.1653,43.4367,43.4367,43.6442,44.3445,43.4471,43.5428,43.3338,43.4367,43.6479,43.4367,43.6401,43.6479,43.5301,43.9028,43.9032,44.3403,43.9009,44.3481,43.1653,43.6433,44.3481,43.1653,43.8018,43.9032,43.4367,43.6479,43.1653,43.4471,43.0883,47.2195,43.6479,43.6996,44.333,63.9872,71.727,69.1113,74.7558,72.8907,67.2375,74.0808,72.8907,63.9872,67.2375,67.2375,73.1521,72.8907,72.8907,67.2375,72.8907,72.8907,70.8598,74.9094,43.6511,43.4471,43.4367,43.9023,43.1653,43.6479,43.6479,44.3403,43.4474,44.3333,43.9032,43.6479,43.6479,43.4453,43.6435],[-79.5113,-79.9397,-70.5266,-70.3624,-70.3369,-70.397,-68.039,-69.9467,-68.0455,-69.826,-70.3369,-70.3097,-68.2718,-70.3369,-70.3653,-70.3369,-70.5165,-70.3097,-70.3694,-70.3624,-70.3369,-70.3212,-68.0454,-68.0455,-69.9295,-70.5932,-68.0455,-70.3097,-70.3097,-70.304,-68.0603,-68.2718,-70.5932,-70.3694,-70.3694,-70.3201,-68.2295,-70.3369,-70.323,-70.5414,-70.3694,-70.3097,-70.3694,-70.3123,-70.3097,-70.3212,-69.9484,-69.9467,-68.0582,-69.9325,-68.2718,-70.5932,-70.3167,-68.2718,-70.5932,-70.1131,-69.9467,-70.3694,-70.3097,-70.5932,-70.3369,-70.6629,-68.3547,-70.3097,-70.2359,-68.2666,-81.6956,-74.8371,-105.4033,-80.2961,-79.8962,-100.2566,-93.8227,-79.8962,-81.6956,-100.2566,-100.2566,-80.0009,-79.8962,-79.8962,-100.2566,-79.8962,-79.8962,-71.2004,-79.1698,-70.3066,-70.3369,-70.3694,-69.9448,-70.5932,-70.3097,-70.3097,-68.0582,-70.3487,-68.0496,-69.9467,-70.3097,-70.3097,-70.3489,-70.3186],null,null,null,{"interactive":true,"draggable":false,"keyboard":true,"title":"","alt":"","zIndexOffset":0,"opacity":1,"riseOnHover":false,"riseOffset":250},null,null,null,null,null,{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]}],"limits":{"lat":[43.0883,74.9094],"lng":[-105.4033,-68.039]}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Vincent Beauregard.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
